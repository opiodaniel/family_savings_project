{% extends 'base.html' %}
{% block title %}My Profile{% endblock %}

{% block content %}
<div class="px-4 space-y-6">
    <!-- Header Card -->
    <div class="bg-white p-6 rounded-3xl shadow-xl border border-gray-200 text-center">
        <img src="https://ui-avatars.com/api/?name={{ user.first_name }}+{{ user.last_name }}&size=128&background=a7f3d0&color=065f46"
             alt="User Avatar"
             class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-green-500 shadow-md">
             
        <h1 class="text-2xl font-extrabold text-gray-800">{{ user.get_full_name|default:user.username|title }}</h1>
        <p class="text-sm text-green-600 font-semibold">{{ user.username }}</p>
        
        {% if user.is_staff %}
        <span class="inline-block mt-2 px-3 py-1 text-xs font-semibold text-white bg-green-700 rounded-full">Admin / Staff</span>
        {% endif %}
    </div>

    <!-- User Account Details -->
    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
        <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Account Details</h2>
        <dl class="divide-y">
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">First Name</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ user.first_name|default:"N/A" }}</dd>
            </div>
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Last Name</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ user.last_name|default:"N/A" }}</dd>
            </div>
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Email</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ user.email|default:"N/A" }}</dd>
            </div>
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Joined Date</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ user.date_joined|date:"M d, Y" }}</dd>
            </div>
        </dl>
    </div>

    <!-- Member Profile Details -->
    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
        <h2 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">Family Savings Profile</h2>
        
        {% if member %}
        <dl class="divide-y">
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Current Location</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ member.current_location }}</dd>
            </div>
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Primary Phone</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ member.phone_number_1 }}</dd>
            </div>
            <div class="py-3 flex justify-between">
                <dt class="text-sm font-medium text-gray-500">Secondary Phone</dt>
                <dd class="text-sm font-semibold text-gray-900">{{ member.phone_number_2|default:"N/A" }}</dd>
            </div>
        </dl>
        {% else %}
        <div class="p-4 bg-yellow-50 rounded-lg text-yellow-800 text-center text-sm font-medium">
            ⚠️ No linked Member profile found. Please contact an administrator.
        </div>
        {% endif %}
    </div>

    <!-- Action: Update Profile Button (Placeholder) -->
    <div class="pt-2 pb-8">
        <a href="{% url 'update_profile' %}" 
           class="w-full block text-center py-3 px-4 border border-green-600 rounded-xl shadow-sm text-lg font-semibold text-green-700 hover:bg-green-50 transition duration-150 ease-in-out">
            Edit My Details
        </a>
    </div>
</div>
{% endblock %}
